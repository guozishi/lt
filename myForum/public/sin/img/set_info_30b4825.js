function suggest(t){document.getElementById("user_name").value=t,jQuery(".log_rep").hide(),jQuery(".log_suc").html("用户名只可以修改一次，请慎重").show()}jQuery(document).ready(function(t){var i=function(t,i,n){this.dNation=t,this.dProvince=i,this.dCity=n,this.init()};i.init=function(t,n,e){new i(t,n,e)},i.prototype={config:{foreign:["其他","美国","加拿大","新加坡","澳大利亚","英国","德国","法国","韩国","马来西亚","新西兰","荷兰","印度","越南","阿拉伯","意大利","泰国","西班牙","沙特阿拉伯","瑞典","俄罗斯","印尼","芬兰","比利时","波兰","菲律宾","挪威","瑞士","爱尔兰","埃及","巴西","伊朗","日本"]},init:function(){this.listenNation(),this.listenProvince(),this.listenCity();var t=this.dProvince.val(),i=this.dCity.val();this.actNation(t),this.actProvince(i)},listenNation:function(){var t=this;this.dNation.change(function(){t.actNation()})},listenProvince:function(){var t=this;this.dProvince.change(function(){t.actProvince()})},listenCity:function(){var i=this.dCity;this.dCity.change(function(){var n=i.val();t("#selCity").val(n)})},actNation:function(i){var n=this.dNation,e=this.dProvince,o=this.dCity,s=n.val(),a=this.config.foreign,c=[];c.push('<option value="0">请选择</option>'),"海外"==s&&(t.each(a,function(t,i){c.push('<option value="'+i+'">'+i+"</option>")}),o.hide(),t("#selProvince").val(s),t("#selCity").val(0)),"中国"==s&&(t.each(__city.province,function(t,i){c.push('<option value="'+i+'" _code="'+t+'">'+i+"</option>")}),o.show(),t("#selProvince").val(0),t("#selCity").val(0)),e.html(c.join("")),this.dCity.html('<option value="0">请选择</option>'),i&&e.val(i)},actProvince:function(i){var n=this.dNation,e=this.dCity,o=this.dProvince,s=o.val(),a=o.find("option:selected").attr("_code"),c=n.val();if(t("#selProvince").val(s),"海外"==c)return t("#selProvince").val(c),void t("#selCity").val(s);var l=[];if(l.push('<option value="0">请选择</option>'),"110000"==a||"120000"==a||"310000"==a||"500000"==a)t.each(__city.city[a],function(i){t.each(__city.country[i],function(t,i){l.push('<option value="'+i+'" _code="'+t+'">'+i+"</option>")})});else{var r=__city.city[a]||[];if(0==r.length)return void e.hide();t.each(r,function(t,i){l.push('<option value="'+i+'" _code="'+t+'">'+i+"</option>")})}e.html(l.join("")).show(),i?(e.val(i),t("#selCity").val(i)):t("#selCity").val(0)}};var n={init:function(){this.listenSave(),this.listenUserName();var n=t("#selProvince").val(),e=t("#selCity").val();if("海外"==n){t("#now_nation").val(n);var o=t("<option />");o.val(e),o.html(e),o.attr("selected",!0),t("#now_province").append(o)}else{t("#now_nation").val("中国");var o=t("<option />");o.val(e),o.html(e),o.attr("selected",!0),t("#now_city").append(o);var s=t("<option />");s.val(n),s.html(n),s.attr("selected",!0),t("#now_province").append(s),t("#now_city").append(o)}i.init(t("#now_nation"),t("#now_province"),t("#now_city"))},listenUserName:function(){t("#user_name").blur(function(){var i=t.trim(t(this).val());if(i){var n="http://passport.tianya.cn/datacheck/username.do?userName="+i+"&var=test&_t="+Math.random();t.getScript(n,function(){if(t(".log_dis").hide(),t(".log_rep").hide(),t(".log_suc").hide(),4==test.code){t(".log_one").hide();var i=test.message;return i=i.replace("<br />",""),t(".log_rep").html(i).show(),!1}return-1==test.code?(t(".log_one").hide(),t(".log_suc").html(test.message).show(),!0):void t(".log_one").show()})}})},listenSave:function(){t(".i_btn_save").click(function(){var i=document.getElementById("i_temper").value.length;return i>120?(new TY.ui.pop({body:"最多允许120个字。"}),!1):(t("#setinfo").submit(),!0)})}};n.init()}),jQuery(document).ready(function(){var t={init:function(){window.tipsJson&&"object"==typeof tipsJson&&this.tyTips({type:tipsJson.type,msg:tipsJson.msg,time:3e3,cb:function(){tipsJson.url&&(location.href=tipsJson.url)}})},tyTips:function(t){TY.loader("Qing.ui.tips",function(){new TY.ui.tips({position:"midCenter",el:t.$el||null,type:t.type||"success",msg:t.msg||"个人信息保存成功",time:t.time||2e3,callback:function(){t.cb&&"function"==typeof t.cb&&t.cb()}})})}};t.init()});